{"version":3,"file":"index.min.js","sources":["../../src/utils/movehelpers.js","../../src/utils/ctxhelpers.js","../../src/utils/error.js","../../src/index.js","../../src/object/index.js"],"sourcesContent":["export function stepx(x, dx, r) {\n  if (x + dx > (500 - r) || (x + dx < r)) {\n    dx = -dx;\n  }\n  return dx;\n}\n\nexport function stepy(y, dy, r) {\n  if (y + dy > (500 - r) || (y + dy < r)) {\n    dy = -dy;\n  }\n  return dy;\n}\n\n\nexport function mutualcollision(source, target, state = null) {\n  let bb1 = source;\n  let gb1 = target;\n  let dx2 = Math.pow(gb1.gb_x - bb1.bb_x, 2);\n  let dy2 = Math.pow(gb1.gb_y - bb1.bb_y, 2);\n  let d = Math.sqrt(dx2 + dy2);\n  let hp = bb1.hp;\n\n  //detected collision\n  if (d < gb1.gb_r + bb1.bb_r) {\n    hp -= 10;\n  }\n  return hp;\n}","export function create(ctx, x, y, r, color = \"green\") {\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, Math.PI * 2, false);\n  ctx.fillStyle = color;\n  ctx.fill();\n  ctx.closePath();\n}\n\nexport function clear(ctx) {\n  ctx.clearRect(0, 0, 500, 500);\n}\n\nexport function transaction(ctx, move, ...args) {\n  ctx.restore();\n  create(ctx, ...args);\n  move();\n  ctx.save();\n}\n","export function xyrError(x, y, r) {\n  if (typeof (x) === \"Number\" && typeof (y) === \"Number\" && typeof (z) === \"Number\")\n    throw new Error(\"Must be Number\");\n  if (x < 0 || y < 0)\n    throw new Error(\"Number must be Positive\");\n  if (x < r || y < r)\n    throw new Error(\"Initial position error\");\n}","import { GB, BB } from \"./object\";\nimport \"./style/main.css\";\nimport { clear } from \"./utils/ctxhelpers\";\n\nconst canvas = document.getElementById(\"gm5\");\nconst scoreHtml = document.getElementById(\"score\");\nconst ctx = canvas.getContext(\"2d\");\nlet cancelId = null;\n\n\n\n\n// record ball position states\n\n\nlet gb1 = new GB(ctx, 100, 50);\nlet gb2 = new GB(ctx, 80, 40);\nlet bb1 = new BB(ctx, 50, 100, 20, \"red\", 300, true);\nlet bb2 = new BB(ctx, 150, 40, 20, \"red\", 200, true);\nlet mybb1 = new BB(ctx, 30, 30, 30, \"yellow\", 100);\n\ndocument.onkeydown = function (evt) {\n  switch (evt.keyCode) {\n    case 37:\n      left();\n      break;\n    case 38:\n      up();\n      break;\n    case 39:\n      right();\n      break;\n    case 40:\n      down();\n      break;\n    // case 32: //SPACE (stop)\n    //   stop();\n    //   break;\n    // case 13: //ENTER (start)\n    //   start();\n    //   break;\n  }\n}\n\n//keybinding\n\nfunction left() { return -2 }\nfunction up() { return -2; }\nfunction right() { return 2; }\nfunction down() { return 2; }\n\n\n\n// let state = {\n//   gb1: { x: gb1.gb_x, y: gb1.gb_y, r: gb1.gb_r },\n//   gb2: { x: gb2.gb_x, y: gb2.gb_y, r: gb2.gb_r },\n//   bb1: { x: bb1.bb_x, y: bb1.bb_y, r: bb1.bb_r, hp: bb1.hp },\n//   mybb1: { x: mybb1.bb_x, y: mybb1.bb_y, r: mybb1.bb_r, hp: mybb1.hp },\n// };\n// function stop(cancelId) {\n//   cancelAnimationFrame(cancelId);\n// }\n\n\n//HP: 100/ Red: 2\n\nfunction start() {\n  clear(ctx);\n  gb1.render(ctx);\n  gb2.render(ctx);\n  bb1.hp > 0 ? bb1.render(ctx, gb1) : null;\n  bb2.hp > 0 ? bb2.render(ctx, gb1) : null;\n  mybb1.hp > 0 ? mybb1.render(ctx) : null;\n  let red = 2 - (bb1.hp > 0 ? 0 : 1) - (bb2.hp > 0 ? 0 : 1);\n  if (red === 0) red += \"\\nDONE! PLEASE REFRESH(F5)\"\n  scoreHtml.innerHTML = `HP: ${bb1.hp + bb2.hp}/ RED: ${red}`;\n  cancelId = requestAnimationFrame(start);\n}\n\nstart();\n\n// when to end?\n// cancelAnimationFrame(cancelId);\n// hp  100 -> 150 => win\n// hp  100 -> 0  => lose","import {\n  stepx,\n  stepy,\n  mutualcollision\n} from \"../utils/movehelpers\";\nimport {\n  create,\n  clear,\n  transaction\n} from \"../utils/ctxhelpers\";\nimport { xyrError } from \"../utils/error\";\n\n// gb - good ball\nclass GB {\n  constructor(ctx, x = 240, y = 160, r = 10, hp = 100) {\n    xyrError(x, y, r);\n    this.gb_x = x;\n    this.gb_y = y;\n    this.gb_r = r;\n    this.vx = 3;\n    this.vy = -3;\n    this.hp = hp;\n    create(ctx, this.gb_x, this.gb_y, this.gb_r);\n  }\n  move() {\n    this.vx = stepx(this.gb_x, this.vx, this.gb_r);\n    this.vy = stepy(this.gb_y, this.vy, this.gb_r);\n    this.gb_x += this.vx;\n    this.gb_y += this.vy;\n  }\n  render(ctx) {\n    transaction(ctx, this.move.bind(this), this.gb_x, this.gb_y, this.gb_r);\n  }\n}\n\n// mp - magic power\n\n// bb - bad ball\nclass BB {\n  constructor(\n    ctx,\n    x = 240,\n    y = 160,\n    r = 10,\n    color = \"red\",\n    hp = 100,\n    detected = false\n  ) {\n    xyrError(x, y, r);\n    this.bb_x = x;\n    this.bb_y = y;\n    this.bb_r = r;\n    this.vx = -3;\n    this.vy = 3;\n    this.color = color;\n    this.hp = hp;\n    this.detected = detected;\n    create(ctx, this.bb_x, this.bb_y, this.bb_r, this.color);\n  }\n\n  move() {\n    //arrow key\n    // if (controller != null) {\n    //   this.bb_x += controller.left();\n    //   this.bb_x += controller.right();\n    //   this.bb_y += controller.up();\n    //   this.bb_y += controller.down();\n    // }\n    this.vx = stepx(this.bb_x, this.vx, this.bb_r);\n    this.vy = stepy(this.bb_y, this.vy, this.bb_r);\n    this.bb_x += this.vx;\n    this.bb_y += this.vy;\n  }\n  render(ctx, target = null) {\n    transaction(ctx, this.move.bind(this), this.bb_x, this.bb_y, this.bb_r, this.color);\n    this.collision(this, target);\n  }\n  collision(source, target) {\n    if (this.detected && target !== null) {\n      this.hp = mutualcollision(source, target);\n    }\n  }\n}\n\n\n\nexport { GB, BB };\n"],"names":["stepx","x","dx","r","stepy","y","dy","create","ctx","color","beginPath","arc","Math","PI","fillStyle","fill","closePath","transaction","move","restore","args","save","xyrError","z","Error","start","clearRect","render","hp","bb1","gb1","bb2","mybb1","red","innerHTML","requestAnimationFrame","GB","gb_x","gb_y","gb_r","vx","vy","this","bind","BB","detected","bb_x","bb_y","bb_r","target","collision","source","dx2","pow","dy2","d","sqrt","mutualcollision","scoreHtml","document","getElementById","canvas","getContext","cancelId","gb2","onkeydown","evt","keyCode"],"mappings":"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"}